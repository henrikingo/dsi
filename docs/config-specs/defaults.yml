# Defaults for all config values used by Distributed Performance 2.0 modules.
# Note: This file is read by dsi/bin/commmon/config.py. Don't mess with it.

infrastructure_provisioning:
    tfvars :
        mongod_instance_count      : 1
        mongos_instance_count      : 0
        configsvr_instance_count   : 0
        workload_instance_count    : 1

        mongod_instance_type       : c3.8xlarge
        configsvr_instance_type    : m3.4xlarge
        mongos_instance_type       : c3.8xlarge
        workload_instance_type     : c3.8xlarge

        region                     : us-west-2
        availability_zone          : us-west-2a
        ssh_user                   : ec2-user
        ssh_key_file               : ../../keys/aws.pem       # Likely to be changed by PERF-526
        tags :                                              
            Name           : server-perf-defaultvariant
            owner          : perf@10gen.com                 # valid email address.
            expire-on-delta: 1                              # Set expire-on tag used by reaper script. Note: must be lower case.
                                                            # delta is days added to current date.
            Variant        : Linux 3-shard cluster
            Project        : sys-perf

mongodb_setup:
    bin_dir                : mongodb
    journal_dir            : /media/ephemeral1/journal
    clean_db_dir           : true                           # TODO: Ultimately, preparing the dbpath directory must move to workload_preparation

    mongod_config_file     : # Note these defaults can be overridden by user, but not unset.
        net:
            port: 27017
        processManagement:
            fork: true
        replication:
            oplogSizeMB: 153600  # 150GB oplog
        setParameter:
            enableTestCommands: true
        storage:
            dbPath: data/dbs
            engine: wiredTiger
        systemLog:
            destination: file
            path: data/logs/mongod.log

    mongos_config_file:
        net:
            port: 27017
        processManagement:
            fork: true
        setParameter:
            enableTestCommands: true
        systemLog:
            destination: file
            path: data/logs/mongos.log

    configsvr_config_file:
        net:
            port: 27017
        processManagement:
            fork: true
        setParameter:
            enableTestCommands: true
        storage:
            dbPath: data/dbs

    topology:
      - cluster_type: standalone
        public_ip: ${infrastructure_provisioning.out.mongod.0.public_ip}
        private_ip: ${infrastructure_provisioning.out.mongod.0.private_ip}

    meta :
        # The list of hosts that can be used in a mongodb connection string
        hosts         : ${mongodb_setup.topology.0.private_ip}:27017
        is_sharded    : false
        is_replset    : false

