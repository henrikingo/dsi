# Shared by all mongods
mongod_config_file:
    storage:
        engine: mmapv1
    replication:
        replSetName: initialsyncrs
    setParameter:
        use3dot2InitialSync: False
        dataReplicatorInitialSyncInserterThreads: 40

topology:
  - id: initialsyncrs
    cluster_type: replset
    mongod:
      - public_ip: ${infrastructure_provisioning.out.mongod.0.public_ip}
        private_ip: ${infrastructure_provisioning.out.mongod.0.private_ip}
      - public_ip: ${infrastructure_provisioning.out.mongod.1.public_ip}
        private_ip: ${infrastructure_provisioning.out.mongod.1.private_ip}
  - cluster_type: standalone
    public_ip: ${infrastructure_provisioning.out.mongod.2.public_ip}
    private_ip: ${infrastructure_provisioning.out.mongod.2.private_ip}

# Meta data about this mongodb setup
meta:
    # The list of hosts that can be used in a mongodb connection string
    hosts: ${mongodb_setup.topology.0.mongod.0.private_ip}:27017
    hostname: ${mongodb_setup.topology.0.mongod.0.private_ip}
    port: 27017
    third_node: ${mongodb_setup.topology.1.private_ip}:27017
    is_sharded: false
    is_replset: true
