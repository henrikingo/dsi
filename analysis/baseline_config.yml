# This yaml file is for controlling the mongo-perf baseline
# process. It contains information that needs to be updated when
# running the baseline patch builds. This file will need to be updated
# as new releases come out.
#
# mongod_links: This is the mongod builds to use. The baselines skip
# the compile phase and directly download an existing binary.
#
# mongod_flags: Flags that need to be changed for older projects (not
# supported, changed)
#
# mongo_shells: Fixed mongo shells to use when baselining. They should
# be updated to recent shells on each branch before running new
# baselines.


# list of paths to builds to use for baselines. 3.2 and later must be enterprise builds to support inMemory
# Note: links have to be shortened to start with perf or perf-??. If
# you have https:// in your link, you need to remove the leading
# characters
mongod_links:
  3.4.13: perf-3.4/performance_3.4_fbdef2ccc53e0fcc9afb570063633d992b2aae42/fbdef2ccc53e0fcc9afb570063633d992b2aae42/mongod-performance_3.4_fbdef2ccc53e0fcc9afb570063633d992b2aae42
  3.4.9: perf-3.4/performance_3.4_876ebee8c7dd0e2d992f36a848ff4dc50ee6603e/876ebee8c7dd0e2d992f36a848ff4dc50ee6603e/mongod-performance_3.4_876ebee8c7dd0e2d992f36a848ff4dc50ee6603e
  3.4.2: perf-3.4/performance_3.4_3f76e40c105fc223b3e5aac3e20dcd026b83b38b/3f76e40c105fc223b3e5aac3e20dcd026b83b38b/mongod-performance_3.4_3f76e40c105fc223b3e5aac3e20dcd026b83b38b
  3.4.1: perf-3.4/performance_3.4_5e103c4f5583e2566a45d740225dc250baacfbd7/5e103c4f5583e2566a45d740225dc250baacfbd7/mongod-performance_3.4_5e103c4f5583e2566a45d740225dc250baacfbd7
  3.4.0: perf-3.4/585163183ff122031e0003e5/f4240c60f005be757399042dc12f6addbc3170c1/mongod-585163183ff122031e0003e5
  3.2.10: perf-3.2/5825260c3ff1227828006b38/79d9b3ab5ce20f51c272b4411202710a082d0317/mongod-5825260c3ff1227828006b38
  3.2.11: perf-3.2/585147523ff122031e000295/009580ad490190ba33d1c6253ebd8d91808923e4/mongod-585147523ff122031e000295  # Patch build
  3.2.12: perf-3.2/performance_3.2_ef3e1bc78e997f0d9f22f45aeb1d8e3b6ac14a14/ef3e1bc78e997f0d9f22f45aeb1d8e3b6ac14a14/mongod-performance_3.2_ef3e1bc78e997f0d9f22f45aeb1d8e3b6ac14a14
  3.2.17: perf-3.2/performance_3.2_186656d79574f7dfe0831a7e7821292ab380f667/186656d79574f7dfe0831a7e7821292ab380f667/mongod-performance_3.2_186656d79574f7dfe0831a7e7821292ab380f667
  3.2.19: perf-3.2/performance_3.2_a9f574de6a566a58b24d126b44a56718d181e989/a9f574de6a566a58b24d126b44a56718d181e989/mongod-performance_3.2_a9f574de6a566a58b24d126b44a56718d181e989
  3.0.14: perf-3.0/582526d23ff1227828006b48/08352afcca24bfc145240a0fac9d28b978ab77f3/mongod-582526d23ff1227828006b48
  3.0.15: perf-3.0/performance_3.0_b8ff507269c382bc100fc52f75f48d54cd42ec3b/b8ff507269c382bc100fc52f75f48d54cd42ec3b/mongod-performance_3.0_b8ff507269c382bc100fc52f75f48d54cd42ec3b

mongod_flags:
  '3.0':  # Need to quote version if only one period
    - pattern: --setParameter diagnosticDataCollectionEnabled=false
      replace: ""
    - pattern: --storageEngine=inMemory
      replace: --storageEngine=wiredTiger
    - pattern: --inMemorySizeGB
      replace: --wiredTigerCacheSizeGB
    - pattern: "--inMemoryEngineConfigString"
      replace: "--wiredTigerEngineConfigString"

# These shell versions should be updated to something recent when reused.
mongo_shells:
  performance: perf/performance_3.6_5d4887d65850f2c1bdb8b2168f348752a1db5015/5d4887d65850f2c1bdb8b2168f348752a1db5015/mongo-performance_3.6_5d4887d65850f2c1bdb8b2168f348752a1db5015
  performance-3.6: perf/performance_3.6_5d4887d65850f2c1bdb8b2168f348752a1db5015/5d4887d65850f2c1bdb8b2168f348752a1db5015/mongo-performance_3.6_5d4887d65850f2c1bdb8b2168f348752a1db5015
  performance-3.4: perf-3.4/performance_3.4_4762f668cb23027de1201b5a30f32eac9f35ab60/4762f668cb23027de1201b5a30f32eac9f35ab60/mongo-performance_3.4_4762f668cb23027de1201b5a30f32eac9f35ab60
  performance-3.2: perf-3.2/performance_3.2_2ecda906b90007568f3ccbbfda06f1bcde689eee/2ecda906b90007568f3ccbbfda06f1bcde689eee/mongo-performance_3.2_2ecda906b90007568f3ccbbfda06f1bcde689eee
  performance-3.0: perf-3.0/performance_3.0_9606f607a9c556fed25a8025e0945e7f8b60d494/9606f607a9c556fed25a8025e0945e7f8b60d494/mongo-performance_3.0_9606f607a9c556fed25a8025e0945e7f8b60d494

sysperf_mongod_links:
  3.4.14: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_fd954412dfc10e4d1e3e2dd4fac040f8b476b268/fd954412dfc10e4d1e3e2dd4fac040f8b476b268/linux/mongod-sys_perf_3.4_fd954412dfc10e4d1e3e2dd4fac040f8b476b268.tar.gz
  3.2.12: https://s3.amazonaws.com/mciuploads/dsi-v3.2/sys_perf_3.2_ef3e1bc78e997f0d9f22f45aeb1d8e3b6ac14a14/ef3e1bc78e997f0d9f22f45aeb1d8e3b6ac14a14/linux/mongod-sys_perf_3.2_ef3e1bc78e997f0d9f22f45aeb1d8e3b6ac14a14.tar.gz
  3.2.9: https://s3.amazonaws.com/mciuploads/dsi-v3.2/sys_perf_3.2_22ec9e93b40c85fc7cae7d56e7d6a02fd811088c/22ec9e93b40c85fc7cae7d56e7d6a02fd811088c/mongod-sys_perf_3.2_22ec9e93b40c85fc7cae7d56e7d6a02fd811088c.tar.gz
  3.2.15: https://s3.amazonaws.com/mciuploads/dsi-v3.2/sys_perf_3.2_e11e3c1b9c9ce3f7b4a79493e16f5e4504e01140/e11e3c1b9c9ce3f7b4a79493e16f5e4504e01140/linux/mongod-sys_perf_3.2_e11e3c1b9c9ce3f7b4a79493e16f5e4504e01140.tar.gz
  3.2.17: https://s3.amazonaws.com/mciuploads/dsi-v3.2/sys_perf_3.2_32c4fbbb2241c421f7cec16c8bd84ace21c6e99f/32c4fbbb2241c421f7cec16c8bd84ace21c6e99f/linux/mongod-sys_perf_3.2_32c4fbbb2241c421f7cec16c8bd84ace21c6e99f.tar.gz
  3.2.20: https://s3.amazonaws.com/mciuploads/dsi-v3.2/sys_perf_3.2_a7a144f40b70bfe290906eb33ff2714933544af8/a7a144f40b70bfe290906eb33ff2714933544af8/linux/mongod-sys_perf_3.2_a7a144f40b70bfe290906eb33ff2714933544af8.tar.gz
  3.4.2: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_3f76e40c105fc223b3e5aac3e20dcd026b83b38b/3f76e40c105fc223b3e5aac3e20dcd026b83b38b/linux/mongod-sys_perf_3.4_3f76e40c105fc223b3e5aac3e20dcd026b83b38b.tar.gz
  3.4.4: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_888390515874a9debd1b6c5d36559ca86b44babd/888390515874a9debd1b6c5d36559ca86b44babd/linux/mongod-sys_perf_3.4_888390515874a9debd1b6c5d36559ca86b44babd.tar.gz
  3.4.5: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_520b8f3092c48d934f0cd78ab5f40fe594f96863/520b8f3092c48d934f0cd78ab5f40fe594f96863/linux/mongod-sys_perf_3.4_520b8f3092c48d934f0cd78ab5f40fe594f96863.tar.gz
  3.4.6: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_d915259708b79fd7394aa8de9779520710d2bbe7/d915259708b79fd7394aa8de9779520710d2bbe7/linux/mongod-sys_perf_3.4_d915259708b79fd7394aa8de9779520710d2bbe7.tar.gz
  3.4.9: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_876ebee8c7dd0e2d992f36a848ff4dc50ee6603e/876ebee8c7dd0e2d992f36a848ff4dc50ee6603e/linux/mongod-sys_perf_3.4_876ebee8c7dd0e2d992f36a848ff4dc50ee6603e.tar.gz
  3.4.10: https://s3.amazonaws.com/mciuploads/dsi-v3.4/sys_perf_3.4_8da0afc67851b39fd6cda03f9dd225445031cb7d/8da0afc67851b39fd6cda03f9dd225445031cb7d/linux/mongod-sys_perf_3.4_8da0afc67851b39fd6cda03f9dd225445031cb7d.tar.gz
  3.6.0: https://s3.amazonaws.com/mciuploads/dsi/sys_perf_3.6_a57d8e71e6998a2d0afde7edc11bd23e5661c915/a57d8e71e6998a2d0afde7edc11bd23e5661c915/linux/mongod-sys_perf_3.6_a57d8e71e6998a2d0afde7edc11bd23e5661c915.tar.gz
  3.6.1: https://s3.amazonaws.com/mciuploads/dsi/sys_perf_3.6_025d4f4fe61efd1fb6f0005be20cb45a004093d1/025d4f4fe61efd1fb6f0005be20cb45a004093d1/linux/mongod-sys_perf_3.6_025d4f4fe61efd1fb6f0005be20cb45a004093d1.tar.gz

base_projects:
  performance: performance
  performance-3.0: performance
  performance-3.2: performance
  performance-3.4: performance
  performance-3.6: performance
  sys-perf: sys-perf
  sys-perf-3.2: sys-perf
  sys-perf-3.4: sys-perf
  sys-perf-3.6: sys-perf

project_files:
  performance: perf.yml
  sys-perf: system_perf.yml

# Tasks not to run on old versions
disabled_tasks:
  '3.4':
    - agg_query_comparison_bestbuy_MMAPv1
    - agg_query_comparison_bestbuy_WT
    - bestbuy_agg_MMAPv1
    - bestbuy_agg_WT
    - bestbuy_query_MMAPv1
    - bestbuy_query_WT
    - change_streams_latency
    - change_streams_throughput
    - initialsync-logkeeper_WT
    - retryable_writes_workloads_WT
    - snapshot_reads_WT
  '3.2':
    - agg_query_comparison_bestbuy_MMAPv1
    - agg_query_comparison_bestbuy_WT
    - bestbuy_agg_MMAPv1
    - bestbuy_agg_WT
    - bestbuy_query_MMAPv1
    - bestbuy_query_WT
    - change_streams_latency
    - change_streams_throughput
    - initialsync_MMAPv1
    - initialsync_WT
    - initialsync-logkeeper_WT
    - secondary_performance_MMAPv1
    - secondary_performance_WT
    - retryable_writes_workloads_WT
    - secondary_reads_WT
    - snapshot_reads_WT
    - views-aggregation
    - views-query
  '3.0':
    - views-aggregation
    - views-query
    - initialsync_WT
    - initialsync_MMAPv1
    - initialsync-logkeeper_WT
    - secondary_performance_WT
    - secondary_performance_MMAPv1
    - agg_query_comparison_bestbuy_MMAPv1
    - agg_query_comparison_bestbuy_WT
    - retryable_writes_workloads_WT
